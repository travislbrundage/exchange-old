{% extends "services/service_register.html" %}
{% load bootstrap_tags %}
{% load i18n %}

{% block extra_script %}
{{ block.super }}
<script type="text/javascript">
$(document).ready(function () {
    var url_input_field = $('#id_url');
    var ssl_config_select_field = $('#id_ssl_config');
    var service_url = url_input_field.val();

    // initial check on page load just in case
    if (service_url.indexOf('https') === 0) {
        ssl_config_select_field.prop('disabled', false);
    } else {
        ssl_config_select_field.prop('disabled', true);
    }
    // detecting any change to the service URL input field
    url_input_field.on("change keyup paste", function(){
        service_url = url_input_field.val();
        // if user entered https into service URL
        // enable the ssl_config field when the service URL field
        // begins with https, and disable it when it no longer does
        if (service_url.indexOf('https') === 0) {
            ssl_config_select_field.prop('disabled', false);
        } else {
            ssl_config_select_field.prop('disabled', true);
        }
    });
})
</script>
{% endblock %}