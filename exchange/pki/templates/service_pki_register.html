{% extends "services/service_register.html" %}
{% load bootstrap_tags %}
{% load i18n %}

{% block extra_script %}
{{ block.super }}
<script type="text/javascript">
$(document).ready(function () {
    // normally should be empty, but first check just in case
    var service_url = $('#id_url').val();

    // enable the ssl_config field when the service URL field
    // begins with https, and disable it when it no longer does
    if (service_url.startsWith('https')) {
        $('#id_ssl_config').prop('disabled', false);
    } else {
        $('#id_ssl_config').prop('disabled', true);
    }

    // detecting any change to the service URL input field
    $('#id_url').on("change keyup paste", function(){
        // if user entered https into service URL
        var service_url = $('#id_url').val();

        // enable the ssl_config field when the service URL field
        // begins with https, and disable it when it no longer does
        if (service_url.startsWith('https')) {
            $('#id_ssl_config').prop('disabled', false);
        } else {
            $('#id_ssl_config').prop('disabled', true);
        }
    });
})

// Angular block relating to pki_select.html
// Better way to organize this?
    var app = angular.module('SSLConfigSelectApp', []);
    app.controller('SSLConfigSelectCtrl', function ($scope) {
        // nothing to do - template should cover everything we need
        console.log($scope.ssl_config_options);
    });
</script>
{% endblock %}